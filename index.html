<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hunt</title> 
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* グローバルスタイル */
        body {
            background-color: #1f2937; /* Dark Gray (Tailwind gray-800) */
            color: #f3f4f6; /* Light Gray (Tailwind gray-100) */
            font-family: 'Noto Sans JP', sans-serif; /* 日本語フォント指定 */
        }
        
        /* カスタムフォント: 時間表示用 (等幅) */
        .font-mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        /* モーダル背景 */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.75);
        }

        /* ランクアイコンの文字強調 */
        .text-outline {
            text-shadow: 1px 1px 2px #000000;
        }
        
        /* マップのスポーンポイント用カスタムCSS */
        .map-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        /* スポーンポイントの基本スタイル */
        .spawn-point {
            position: absolute;
            cursor: pointer;
            pointer-events: all; 
            transition: transform 0.1s ease-out, opacity 0.2s ease-out;
            z-index: 10;
        }

        /* 展開パネルの初期非表示状態 */
        .expandable-panel {
            max-height: 0;
            transition: max-height 0.3s ease-in-out;
        }

        /* モブカードの列配置 */
        @media (min-width: 768px) {
            #mob-list-container {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1.5rem;
            }
        }
        @media (max-width: 767px) and (min-width: 640px) {
            #mob-list-container {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }

        /* NEW: タブボタンの横幅を固定 (4列配置) */
        #rank-tabs .tab-btn {
            width: calc((100% - 0.5rem * 3) / 4); /* (全幅 - ギャップ) / 4 */
            min-width: 60px; /* 最小幅を確保 */
            max-width: 100px;
        }
        /* 中画面以上ではギャップを広げる */
        @media (min-width: 640px) {
            #rank-tabs .tab-btn {
                width: calc((100% - 1rem * 3) / 4);
                max-width: 120px;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="p-4 md:p-6 min-h-screen">
        
        <div class="flex flex-col sm:flex-row sm:justify-center sm:items-center mb-2 relative">
            <div id="uuid-display" class="text-xs text-gray-400 text-right mb-2 sm:mb-0 sm:absolute sm:top-0 sm:right-0 sm:mt-2 sm:mr-4 hidden"></div>

            <h1 class="text-3xl font-extrabold text-emerald-400 text-center sm:text-left mx-auto">The Hunt</h1>
        </div>

        <div class="text-center mb-4">
            <p class="text-sm font-medium text-gray-300">モブハントの討伐記録とリポップ予測</p>
            <p class="text-sm font-medium text-gray-300">湧き潰し管理ツールです</p>
        </div>

        <div id="error-message-container" class="hidden my-4"></div>

        <div class="mb-8">
            <div id="rank-tabs" class="flex justify-center space-x-2 sm:space-x-4 mb-2">
                <button class="tab-btn px-4 py-2 rounded-lg font-bold text-sm transition bg-blue-600 hover:bg-blue-500" data-rank="ALL">ALL</button>
                <button class="tab-btn px-4 py-2 rounded-lg font-bold text-sm transition bg-gray-700 hover:bg-gray-600" data-rank="S">Sランク</button>
                <button class="tab-btn px-4 py-2 rounded-lg font-bold text-sm transition bg-gray-700 hover:bg-gray-600" data-rank="A">Aランク</button>
                <button class="tab-btn px-4 py-2 rounded-lg font-bold text-sm transition bg-gray-700 hover:bg-gray-600" data-rank="F">FATE</button>
            </div>

            <div id="area-filter-container" class="flex justify-center mt-2 hidden">
                <div id="area-selection-menu" class="flex flex-wrap justify-center gap-2 p-2 bg-gray-700 rounded-lg max-w-lg">
                    <button class="area-filter-btn px-3 py-1 text-xs font-medium rounded-full text-white bg-blue-600 hover:bg-blue-500 transition" data-area="ALL">ALL</button>
                    <button class="area-filter-btn px-3 py-1 text-xs font-medium rounded-full text-white bg-gray-600 hover:bg-gray-500 transition" data-area="黄金">黄金</button>
                    <button class="area-filter-btn px-3 py-1 text-xs font-medium rounded-full text-white bg-gray-600 hover:bg-gray-500 transition" data-area="暁月">暁月</button>
                    <button class="area-filter-btn px-3 py-1 text-xs font-medium rounded-full text-white bg-gray-600 hover:bg-gray-500 transition" data-area="漆黒">漆黒</button>
                    <button class="area-filter-btn px-3 py-1 text-xs font-medium rounded-full text-white bg-gray-600 hover:bg-gray-500 transition" data-area="紅蓮">紅蓮</button>
                    <button class="area-filter-btn px-3 py-1 text-xs font-medium rounded-full text-white bg-gray-600 hover:bg-gray-500 transition" data-area="蒼天">蒼天</button>
                    <button class="area-filter-btn px-3 py-1 text-xs font-medium rounded-full text-white bg-gray-600 hover:bg-gray-500 transition" data-area="新生">新生</button>
                </div>
            </div>
        </div>

        <div id="mob-list-container" class="space-y-6 md:space-y-0">
            <div id="column-1" class="space-y-6"></div>
            <div id="column-2" class="space-y-6"></div>
            <div id="column-3" class="space-y-6"></div>
        </div>
    </div>

    <div id="report-modal" class="modal-overlay fixed inset-0 z-50 hidden items-center justify-center p-4" onclick="closeReportModal()">
        <div class="bg-gray-800 rounded-lg shadow-2xl w-full max-w-sm p-6 space-y-4" onclick="event.stopPropagation()">
            <h2 class="text-xl font-bold text-white">討伐報告</h2>
            <p class="text-lg text-yellow-200 font-semibold" id="modal-mob-name"></p>

            <div>
                <label for="report-datetime" class="block text-sm font-medium text-gray-300 mb-1">討伐日時 (ローカルタイム)</label>
                <input type="datetime-local" id="report-datetime" required
                       class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white">
            </div>

            <div>
                <label for="report-memo" class="block text-sm font-medium text-gray-300 mb-1">メモ (任意)</label>
                <textarea id="report-memo" rows="2" 
                          class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white" 
                          placeholder="湧き条件や場所など"></textarea>
            </div>
            
            <div id="report-status" class="text-sm font-semibold hidden"></div>

            <div class="flex justify-end space-x-3">
                <button id="cancel-report" type="button" 
                        class="px-4 py-2 text-sm font-medium rounded-md text-gray-300 bg-gray-600 hover:bg-gray-500 transition">
                    キャンセル
                </button>
                <button id="submit-report" type="submit" 
                        class="px-4 py-2 text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-500 transition">
                    報告する
                </button>
            </div>
        </div>
    </div>

    <script src="./script.js"></script>
</body>
</html>
