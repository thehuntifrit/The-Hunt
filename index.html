<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hunt - FFXIV</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* グリッドレイアウトの列数を制御 */
        @media (min-width: 1024px) {
            #mob-list-container {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        @media (min-width: 768px) and (max-width: 1023px) {
            #mob-list-container {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
        @media (max-width: 767px) {
            #mob-list-container {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
        }
        
        /* タイトルのアウトライン風テキスト */
        .text-outline {
            text-shadow: 1px 1px 2px #000000, 
                         -1px -1px 2px #000000, 
                         1px -1px 2px #000000, 
                         -1px 1px 2px #000000;
        }

        /* 展開パネルの下部余白調整用 */
        .panel-padding-bottom {
            padding-bottom: 0.6rem; /* 1rem = 16pxなので、9.6px程度の余白 */
        }

        /* プログレスバーの基本スタイル */
        .progress-bar {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            border-radius: 0.75rem; /* rounded-xlと同じ */
            /* transition-all duration-100 ease-linear はJS側で付与 */
        }

        /* マップ画像とオーバーレイのスタイル */
        .map-image {
            /* 最大幅を画像サイズに合わせ、アスペクト比を維持 */
            max-width: 100%; 
            height: auto;
        }

        .map-overlay {
            /* マップ画像と同じ位置とサイズ */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* デフォルトは下層の画像クリックを許可しない */
        }
        
        /* 湧き潰しポイントの基本スタイル */
        .spawn-point {
            pointer-events: all; /* クリック可能にする */
        }
        
        /* 湧き潰し済みのポイントのスタイル */
        .spawn-point.culled {
             /* 湧き潰し済みの場合のスタイル調整 (JSで色を制御) */
             /* transform: translate(-50%, -50%) scale(1.0) はJSで制御 */
        }

    </style>
</head>
<body class="bg-gray-800 text-white min-h-screen">

    <header class="bg-gray-900 p-4 shadow-lg sticky top-0 z-20">
        <div class="container mx-auto">
            <div class="flex items-center justify-center relative h-8"> 
                
                <div id="uuid-display" class="text-xs font-semibold text-gray-400 hidden 
                     absolute right-0 top-1/2 transform -translate-y-1/2">
                    </div>
                
                <h1 class="text-3xl font-extrabold text-outline text-yellow-200">The Hunt</h1>
                
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-4" id="app">
        
        <div id="error-message-container" class="hidden my-2">
            </div>

        <div id="rank-tabs" class="flex justify-around space-x-2 p-2 bg-gray-900 rounded-lg shadow-inner mb-4">
            <button data-rank="ALL" class="tab-btn bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex-1 shadow-md transition">ALL</button>
            <button data-rank="S" class="tab-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex-1 shadow-md transition">S</button>
            <button data-rank="A" class="tab-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex-1 shadow-md transition">A</button>
            <button data-rank="B" class="tab-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex-1 shadow-md transition">B</button>
            <button data-rank="F" class="tab-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex-1 shadow-md transition">FATE</button>
        </div>
        
        <div id="area-filter-container" class="grid grid-cols-6 gap-2 p-2 bg-gray-900 rounded-lg shadow-inner mb-4 hidden">
            <button data-area="新生" class="area-filter-btn bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold py-1 px-1 rounded-md transition shadow-sm">新生</button>
            <button data-area="蒼天" class="area-filter-btn bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold py-1 px-1 rounded-md transition shadow-sm">蒼天</button>
            <button data-area="紅蓮" class="area-filter-btn bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold py-1 px-1 rounded-md transition shadow-sm">紅蓮</button>
            <button data-area="漆黒" class="area-filter-btn bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold py-1 px-1 rounded-md transition shadow-sm">漆黒</button>
            <button data-area="暁月" class="area-filter-btn bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold py-1 px-1 rounded-md transition shadow-sm">暁月</button>
            <button data-area="黄金" class="area-filter-btn bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold py-1 px-1 rounded-md transition shadow-sm">黄金</button>
        </div>


        <div id="mob-list-container" class="grid gap-4 mt-4">
            <div id="column-1"></div>
            <div id="column-2"></div>
            <div id="column-3"></div>
            </div>
    </main>

    <div id="report-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden items-center justify-center z-50 transition-opacity duration-300">
        <div class="bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-sm border border-gray-700">
            <h3 class="text-xl font-bold mb-4 text-yellow-300">討伐報告</h3>
            <p class="mb-4 text-lg font-semibold" id="modal-mob-name">モンスター名</p>
            
            <form id="report-form">
                <div class="mb-4">
                    <label for="report-datetime" class="block text-sm font-medium text-gray-400 mb-1">討伐日時 (ローカル時間)</label>
                    <input type="datetime-local" id="report-datetime" required class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-blue-500 focus:border-blue-500">
                </div>
                
                <div class="mb-6">
                    <label for="report-memo" class="block text-sm font-medium text-gray-400 mb-1">メモ (オプション)</label>
                    <input type="text" id="report-memo" class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-blue-500 focus:border-blue-500" placeholder="例: 抽選時間, 抽選MOB">
                </div>

                <div id="report-status" class="text-center text-sm font-semibold hidden mb-4"></div>

                <div class="flex justify-end space-x-3">
                    <button type="button" id="cancel-report" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition shadow-md">キャンセル</button>
                    <button type="button" id="submit-report" class="bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition shadow-md">報告する</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
